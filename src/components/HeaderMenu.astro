---
const { logo } = Astro.props;
---

<header
  class="sticky top-0 z-50 backdrop-blur-lg bg-white/80 border-b duration-300 border-b-transparent lg:px-20 md:px-3 dark:bg-zinc-800"
>
  <nav class="flex justify-between items-center w-full h-20 px-4 md:px-0">
    <a class="text-sky-600 dark:text-white" href="/">
      <h2 class="text-2xl md:text-3xl font-bold">
        {logo}🫱🏼‍🫲🏽
      </h2>
    </a>
    <ul
      class="hidden md:flex gap-8 [&>li>a]:text-sky-600 [&>li>a]:font-medium dark:[&>li>a]:text-white"
    >
      <li class="hover:underline duration-300"><a href="/">¿Quién Soy?</a></li>
      <li class="hover:underline duration-300">
        <a href="/informacion">Información</a>
      </li>
      <li class="hover:underline duration-300">
        <a href="/iniciativas">Iniciativas</a>
      </li>
      <li class="hover:underline duration-300">
        <a href="/FooterContact">Contacto</a>
      </li>
    </ul>

    <button id="themeToggle" type="button" class="px-2 py-1 md:px-4">
      <img
        id="themeDark"
        src="/icons/moon.svg"
        alt="Icono Luna"
        class="w-5 h-5 md:w-6 md:h-6"
      />
      <img
        id="themeLight"
        src="/icons/sun.svg"
        alt="Icono Sol"
        class="w-5 h-5 md:w-6 md:h-6 hidden dark:block"
      />
    </button>

    <div class="md:hidden flex gap-4">
      <button
        id="mobileMenuButton"
        type="button"
        class="p-2 rounded-md bg-sky-600 dark:bg-white"
      >
        <svg
          class="w-6 h-6 text-white dark:text-sky-600"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16m-7 6h7"></path>
        </svg>
      </button>
    </div>
  </nav>
  <!-- Mobile Menu -->
  <div id="mobileMenu" class="hidden md:hidden">
    <ul
      class="flex flex-col items-center gap-5 px-4 py-2 bg-white dark:bg-zinc-800 dark:text-white"
    >
      <li><a href="/">¿Quién Soy?</a></li>
      <li><a href="/informacion">Información</a></li>
      <li><a href="/iniciativas">Iniciativas</a></li>
      <li><a href="/FooterContact">Contacto</a></li>
    </ul>
  </div>
</header>

<script>
  const $themeToggle = document.querySelector("#themeToggle");
  const $themeToggleDark = document.querySelector("#themeDark");
  const $themeToggleLight = document.querySelector("#themeLight");
  const $prefersDarkMode = window.matchMedia(
    "(prefers-color-scheme: dark)"
  ).matches;
  const $storedTheme = localStorage.getItem("color-theme");

  const toggleTheme = () => {
    const isDarkMode = document.documentElement.classList.toggle("dark");
    localStorage.setItem("color-theme", isDarkMode ? "dark" : "light");
  };

  const updateThemeIcons = () => {
    $themeToggleDark.classList.toggle(
      "hidden",
      document.documentElement.classList.contains("dark")
    );
    $themeToggleLight.classList.toggle(
      "hidden",
      !document.documentElement.classList.contains("dark")
    );
  };

  if ($storedTheme === "dark" || (!$storedTheme && $prefersDarkMode)) {
    document.documentElement.classList.add("dark");
  }

  updateThemeIcons();
  $themeToggle.addEventListener("click", () => {
    toggleTheme();
    updateThemeIcons();
  });
</script>

<script>
  document.querySelector("#mobileMenuButton").addEventListener("click", () => {
    document.querySelector("#mobileMenu").classList.toggle("hidden");
  });
</script>
